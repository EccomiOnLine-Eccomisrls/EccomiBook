<!doctype html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EccomiBook</title>
    <link rel="icon" href="data:," />
    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">ðŸ“š EccomiBook</div>
      <div class="right">
        <span id="backend-status" class="muted">Backend: verificaâ€¦</span>
        <button id="btn-api-key" class="btn ghost">API key</button>
      </div>
    </header>

    <main class="container">
      <section class="hero">
        <h1>Crea libri professionali con AI</h1>
        <p>Genera capitoli, organizza la libreria, esporta in PDF.</p>
        <div class="row gap">
          <button id="btn-create-book" class="btn primary">Crea Libro</button>
          <button id="btn-open-library" class="btn">Libreria</button>
          <button id="btn-open-editor" class="btn ghost">Modifica Capitolo</button>
        </div>
      </section>

      <!-- Quick actions -->
      <section class="grid-3">
        <div class="card">
          <h3>Quick start</h3>
          <p>Avvia la creazione del tuo primo libro con pochi clic.</p>
          <button id="btn-quick-new" class="btn danger">Nuovo libro</button>
        </div>

        <div class="card">
          <h3>Libreria</h3>
          <p>Raccogli bozze e progetti completati in un unico posto.</p>
          <button id="btn-library-card" class="btn">Apri libreria</button>
        </div>

        <div class="card">
          <h3>Modifica capitolo</h3>
          <p>Affina titoli, riassunti e contenuti AI.</p>
          <button id="btn-editor-card" class="btn ghost">Vai allâ€™editor</button>
        </div>
      </section>

      <!-- LIBRERIA -->
      <section id="library-section" class="card hidden">
        <div class="row between center">
          <h3>La tua libreria</h3>
          <button id="btn-refresh-library" class="btn ghost small">Aggiorna</button>
        </div>
        <div id="library-list" class="list"></div>
      </section>

      <!-- EDITOR (placeholder) -->
      <section id="editor-section" class="card hidden">
        <h3>Editor capitolo (demo)</h3>
        <div class="row gap">
          <input id="edit-book-id" class="input" placeholder="ID libro (es. book_il-tuo-titolo)" />
          <input id="edit-chapter-id" class="input" placeholder="ID capitolo (se giÃ  esiste)" />
        </div>
        <textarea id="edit-content" class="textarea" rows="8" placeholder="Testo del capitolo..."></textarea>
        <div class="row gap">
          <button id="btn-editor-save" class="btn primary">Salva (demo)</button>
          <button id="btn-editor-close" class="btn ghost">Chiudi</button>
        </div>
        <p class="muted small">Questo Ã¨ un placeholder: appena definiamo lâ€™endpoint ufficiale `PUT /books/{id}/chapters/{id}` lo colleghiamo qui.</p>
      </section>
    </main>

    <!-- Modal API KEY -->
    <dialog id="apikey-modal" class="modal">
      <form method="dialog" class="modal-card">
        <h3>Imposta API key</h3>
        <p class="muted small">Usa la key associata al tuo piano EccomiBook. Per test: <code>demo_key_user</code></p>
        <input id="apikey-input" class="input" placeholder="Inserisci X-API-Key" />
        <div class="row end gap">
          <button value="cancel" class="btn ghost">Annulla</button>
          <button id="apikey-save" class="btn primary">Salva</button>
        </div>
      </form>
    </dialog>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
